<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My app</title>
</head>
<style>
  h1 {
      color: #f41d0a;
  }


  input[type=text],
  input[type=password] {
      width: 100%;
      padding: 12px 20px;
      margin: 8px 0;
      display: inline-block;
      border: 1px solid rgb(84, 74, 74);
      box-sizing: border-box;
  }

  label {
      color: rgb(252, 65, 3);
  }

  button {
      background-color: rgb(60, 178, 119);
      color: rgb(0, 0, 0);
      padding: 14px 20px;
      margin: 8px 0;
      border: none;
      cursor: pointer;
  }

  button:hover {
      opacity: 0.8;
  }

  .error-message {
      color: red;
      font-size: 14px;
  }
</style>


<body>
    <h1>Velkommen</h1>

        <label for="username">Bukernavn</label>
        <input id="username" type="text" value="annhodson80@yahoo.no" />
        <label for="pword">Passord</label>
        <input id="pword" type="text" value="Nico08" />
        <button id="login">Login</button>
        
    
      </body>

    <script>
        const username = document.getElementById("username");
    const pword = document.getElementById("pword");
    const login = document.getElementById("login");




    
    login.addEventListener("click", async () => {
      const url =
        "";

      let logindata = await fetch(url, {
        method: "post",
        headers: {
          authorization: createBasicAuthString(username.value, pword.value),
        },
      });
      if (logindata.status === 200) {
        let logininfo = await logindata.json();
        console.log(logininfo);
        localStorage.setItem("token", logininfo.logindata.token);
        msg.innerHTML = "Logged in";
        listOrders();
        getUsers();
      }
    });
    async function getUsers() {
      const url =
        ""; 
        let data=await fetch(url,{
          method: "get", 
          headers:{
          authorization:localStorage.getItem("token")
          }
        })
      let users=await data.json();
      console.log(users);
      localStorage.setItem("user",JSON.stringify(users[0]));
    }

    
    function createBasicAuthString(username, password) {
      let combinedStr = username + ":" + password;
      let b64Str = btoa(combinedStr);
      return "basic " + b64Str; //return the basic authentication string
    
                }


               
               
 const express = require('express');
const app = express();

// Middleware-funksjon
const minMellomvare = (req, res, next) => {
  // Mellomvarelogikk
  
  console.log('Mellomvaren kjører');

  // Endre forespørselsobjektet
  req.customProperty = 'Dette er en tilpasset egenskap';

  // Kall neste mellomvare i stabelen
  next();
};

// Bruk middleware
app.use(minMellomvare);

// Definer ruten
app.get('/', (req, res) => {
  // Få tilgang til den tilpassede egenskapen lagt til av mellomvaren
  const customProperty = req.customProperty || 'Ingen tilpasset egenskap satt';

  res.send(`Hei verden! ${customProperty}`);
});

// Start serveren
const port = 3000;
app.listen(port, () => {
  console.log(`Serveren kjører på port ${port}`);
});





    </script>

    
</body>

</html>


  </script>
</html>
